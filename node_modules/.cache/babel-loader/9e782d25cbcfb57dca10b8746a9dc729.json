{"ast":null,"code":"export const postDataToSheet = (selectionData, reviewer) => {\n  // const GSHEETS_API_KEY = process.env.REACT_APP_GOOGLESHEETS_API_KEY\n  const GSHEETS_SHEET_ID = process.env.REACT_APP_QA_TEST_SHEET_1_ID;\n  const ACCESS_TOKEN = process.env.REACT_APP_ACCESS_TOKEN;\n  debugger;\n\n  const rowIds = () => {\n    return selectionData.selectedVideos.map(video => video.row);\n  };\n\n  const firstRow = rowIds()[0] - 1;\n  const endRow = rowIds()[rowIds().length - 1];\n  return dispatch => {\n    fetch(`https://sheets.googleapis.com/v4/spreadsheets/${GSHEETS_SHEET_ID}:batchUpdate`, {\n      method: 'POST',\n      headers: {\n        \"Content-Type\": 'application/json',\n        Authorization: `Bearer ${ACCESS_TOKEN}`\n      },\n      body: JSON.stringify({\n        requests: [{\n          repeatCell: {\n            range: {\n              startColumnIndex: 15,\n              endColumnIndex: 16,\n              startRowIndex: firstRow,\n              endRowIndex: endRow,\n              sheetId: 0\n            },\n            cell: {\n              userEnteredValue: {\n                \"stringValue\": `${selectionData.reviewer}`\n              }\n            },\n            fields: '*'\n          }\n        }]\n      })\n    }).then(response => response.json()).then(rxData => {\n      console.log(rxData);\n\n      if (rxData.error) {\n        alert(rxData.error.message);\n      } else {\n        console.log(rxData);\n        dispatch({\n          type: 'APPENDED_SHEET_DATA',\n          sheetData: rxData\n        });\n      }\n    });\n  };\n};","map":{"version":3,"sources":["/Users/John/Dev/MC/media_ops_control_center/the-mocc-front/src/actions/postDataToTrackingSheet.js"],"names":["postDataToSheet","selectionData","reviewer","GSHEETS_SHEET_ID","process","env","REACT_APP_QA_TEST_SHEET_1_ID","ACCESS_TOKEN","REACT_APP_ACCESS_TOKEN","rowIds","selectedVideos","map","video","row","firstRow","endRow","length","dispatch","fetch","method","headers","Authorization","body","JSON","stringify","requests","repeatCell","range","startColumnIndex","endColumnIndex","startRowIndex","endRowIndex","sheetId","cell","userEnteredValue","fields","then","response","json","rxData","console","log","error","alert","message","type","sheetData"],"mappings":"AAAA,OAAO,MAAMA,eAAe,GAAG,CAACC,aAAD,EAAgBC,QAAhB,KAA6B;AACxD;AACA,QAAMC,gBAAgB,GAAGC,OAAO,CAACC,GAAR,CAAYC,4BAArC;AACA,QAAMC,YAAY,GAAGH,OAAO,CAACC,GAAR,CAAYG,sBAAjC;AAEA;;AACA,QAAMC,MAAM,GAAG,MAAK;AAChB,WAAOR,aAAa,CAACS,cAAd,CAA6BC,GAA7B,CAAiCC,KAAK,IAAIA,KAAK,CAACC,GAAhD,CAAP;AACH,GAFD;;AAIA,QAAMC,QAAQ,GAAGL,MAAM,GAAG,CAAH,CAAN,GAAc,CAA/B;AACA,QAAMM,MAAM,GAAGN,MAAM,GAAGA,MAAM,GAAGO,MAAT,GAAkB,CAArB,CAArB;AAEA,SAAQC,QAAD,IAAc;AACjBC,IAAAA,KAAK,CAAE,iDAAgDf,gBAAiB,cAAnE,EAAiF;AAClFgB,MAAAA,MAAM,EAAE,MAD0E;AAElFC,MAAAA,OAAO,EAAC;AACJ,wBAAgB,kBADZ;AAEJC,QAAAA,aAAa,EAAG,UAASd,YAAa;AAFlC,OAF0E;AAM9Ee,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACjBC,QAAAA,QAAQ,EAAC,CAAC;AACNC,UAAAA,UAAU,EAAC;AACPC,YAAAA,KAAK,EAAC;AACHC,cAAAA,gBAAgB,EAAE,EADf;AAEHC,cAAAA,cAAc,EAAE,EAFb;AAGHC,cAAAA,aAAa,EAAEhB,QAHZ;AAIHiB,cAAAA,WAAW,EAAEhB,MAJV;AAKHiB,cAAAA,OAAO,EAAE;AALN,aADC;AAQPC,YAAAA,IAAI,EAAC;AACDC,cAAAA,gBAAgB,EAAE;AACd,+BAAgB,GAAEjC,aAAa,CAACC,QAAS;AAD3B;AADjB,aARE;AAaPiC,YAAAA,MAAM,EAAE;AAbD;AADL,SAAD;AADQ,OAAf;AANwE,KAAjF,CAAL,CAyBOC,IAzBP,CAyBYC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EAzBxB,EA0BKF,IA1BL,CA0BUG,MAAM,IAAI;AAChBC,MAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;;AACA,UAAGA,MAAM,CAACG,KAAV,EAAgB;AACZC,QAAAA,KAAK,CAACJ,MAAM,CAACG,KAAP,CAAaE,OAAd,CAAL;AACH,OAFD,MAEK;AAEDJ,QAAAA,OAAO,CAACC,GAAR,CAAYF,MAAZ;AACAtB,QAAAA,QAAQ,CAAC;AAAC4B,UAAAA,IAAI,EAAE,qBAAP;AAA8BC,UAAAA,SAAS,EAAEP;AAAzC,SAAD,CAAR;AACH;AACJ,KAnCD;AAoCH,GArCD;AAuCH,CApDM","sourcesContent":["export const postDataToSheet = (selectionData, reviewer) => {\n    // const GSHEETS_API_KEY = process.env.REACT_APP_GOOGLESHEETS_API_KEY\n    const GSHEETS_SHEET_ID = process.env.REACT_APP_QA_TEST_SHEET_1_ID\n    const ACCESS_TOKEN = process.env.REACT_APP_ACCESS_TOKEN\n   \n    debugger\n    const rowIds = () =>{\n        return selectionData.selectedVideos.map(video => video.row)  \n    }\n\n    const firstRow = rowIds()[0] - 1\n    const endRow = rowIds()[rowIds().length - 1]\n\n    return (dispatch) => {\n        fetch(`https://sheets.googleapis.com/v4/spreadsheets/${GSHEETS_SHEET_ID}:batchUpdate`,{\n            method: 'POST',\n            headers:{\n                \"Content-Type\": 'application/json',\n                Authorization: `Bearer ${ACCESS_TOKEN}`\n            },\n                body: JSON.stringify({\n                    requests:[{\n                        repeatCell:{\n                            range:{\n                               startColumnIndex: 15,\n                               endColumnIndex: 16,\n                               startRowIndex: firstRow,\n                               endRowIndex: endRow,\n                               sheetId: 0 \n                            },\n                            cell:{\n                                userEnteredValue: {\n                                    \"stringValue\": `${selectionData.reviewer}`\n                                },\n                            },\n                            fields: '*'\n                        }\n                    }]\n                })\n            }).then(response => response.json())\n            .then(rxData => {\n            console.log(rxData)\n            if(rxData.error){\n                alert(rxData.error.message)\n            }else{\n                \n                console.log(rxData)\n                dispatch({type: 'APPENDED_SHEET_DATA', sheetData: rxData})\n            }\n        })\n    }\n    \n}   \n\n"]},"metadata":{},"sourceType":"module"}