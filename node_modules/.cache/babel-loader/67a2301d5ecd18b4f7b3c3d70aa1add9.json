{"ast":null,"code":"// THIS WHOLE FINDDRIVEFOLDERIDS FUNCTION SHOULD BE REFACTORED TO A FETCH FOLDER DATA FUNCTION\nexport const findDriveFolderIds = selectionData => {\n  // I WANT TO MOVE THE VIDEOS IN selectionData.selectedVideos TO selectionData.reveiewer 's DRIVE FOLDER\n  const ACCESS_TOKEN = process.env.REACT_APP_ACCESS_TOKEN;\n  const DRIVE_ID = process.env.REACT_APP_GOOGLEDRIVE_PARENT_ID;\n  const DRIVE_API_KEY = process.env.REACT_APP_GOOGLEDRIVE_API_KEY;\n  const selectedFileNames = [];\n  const selectedNamesAndIds = {};\n  selectionData.selectedVideos.forEach(video => {\n    let name = `KS_${video.mcVodId}_HD.wmv`;\n    selectedFileNames.push(name);\n  });\n  return dispatch => {\n    fetch(`https://www.googleapis.com/drive/v3/files`, {\n      headers: {\n        authorization: `Bearer ${ACCESS_TOKEN}`\n      }\n    }).then(response => response.json()).then(rxData => {\n      const reviewerFolder = rxData.files.find(file => file.name === selectionData.reviewer + \"_QA\");\n      const oldParentFolder = rxData.files.find(file => file.name === \"TO_BE_ASSIGNED\"); // GET FILE IDS OF SELECTED VIDEOS\n\n      selectedFileNames.forEach(name => {\n        const selectedDriveDataId = rxData.files.find(file => file.name === name).id;\n        selectedNamesAndIds[name] = selectedDriveDataId;\n      });\n\n      for (let name in selectedNamesAndIds) {\n        let id = selectedNamesAndIds[name];\n        const dataForUpdate = {\n          fileId: id,\n          fileName: name,\n          reviewerName: selectionData.reviewer,\n          reviewerFolder: reviewerFolder,\n          parentFolder: oldParentFolder\n        };\n        updateDriveFolders(dataForUpdate);\n      }\n\n      rxData.error ? alert(rxData.error) : alert(\"Updating Folder Data...\"); // console.log(\"drive\", rxData)\n    });\n  };\n};\nexport const updateDriveFolders = dataForUpdate => {\n  console.log(dataForUpdate);\n};","map":{"version":3,"sources":["/Users/John/Dev/MC/media_ops_control_center/the-mocc-front/src/actions/moveToSelectedDriveFolder.js"],"names":["findDriveFolderIds","selectionData","ACCESS_TOKEN","process","env","REACT_APP_ACCESS_TOKEN","DRIVE_ID","REACT_APP_GOOGLEDRIVE_PARENT_ID","DRIVE_API_KEY","REACT_APP_GOOGLEDRIVE_API_KEY","selectedFileNames","selectedNamesAndIds","selectedVideos","forEach","video","name","mcVodId","push","dispatch","fetch","headers","authorization","then","response","json","rxData","reviewerFolder","files","find","file","reviewer","oldParentFolder","selectedDriveDataId","id","dataForUpdate","fileId","fileName","reviewerName","parentFolder","updateDriveFolders","error","alert","console","log"],"mappings":"AAAA;AACA,OAAO,MAAMA,kBAAkB,GAAIC,aAAD,IAAkB;AAEpD;AACI,QAAMC,YAAY,GAAGC,OAAO,CAACC,GAAR,CAAYC,sBAAjC;AACA,QAAMC,QAAQ,GAAGH,OAAO,CAACC,GAAR,CAAYG,+BAA7B;AACA,QAAMC,aAAa,GAAGL,OAAO,CAACC,GAAR,CAAYK,6BAAlC;AACA,QAAMC,iBAAiB,GAAG,EAA1B;AACA,QAAMC,mBAAmB,GAAG,EAA5B;AAGAV,EAAAA,aAAa,CAACW,cAAd,CAA6BC,OAA7B,CAAqCC,KAAK,IAAI;AAC1C,QAAIC,IAAI,GAAI,MAAKD,KAAK,CAACE,OAAQ,SAA/B;AACAN,IAAAA,iBAAiB,CAACO,IAAlB,CAAuBF,IAAvB;AACH,GAHD;AAKA,SAAQG,QAAD,IAAc;AACjBC,IAAAA,KAAK,CAAE,2CAAF,EACL;AACIC,MAAAA,OAAO,EAAE;AACLC,QAAAA,aAAa,EAAG,UAASnB,YAAa;AADjC;AADb,KADK,CAAL,CAKGoB,IALH,CAKQC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EALpB,EAMCF,IAND,CAMMG,MAAM,IAAI;AACZ,YAAMC,cAAc,GAAGD,MAAM,CAACE,KAAP,CAAaC,IAAb,CAAkBC,IAAI,IAAIA,IAAI,CAACd,IAAL,KAAcd,aAAa,CAAC6B,QAAd,GAAyB,KAAjE,CAAvB;AACA,YAAMC,eAAe,GAAGN,MAAM,CAACE,KAAP,CAAaC,IAAb,CAAkBC,IAAI,IAAIA,IAAI,CAACd,IAAL,KAAc,gBAAxC,CAAxB,CAFY,CAGZ;;AACAL,MAAAA,iBAAiB,CAACG,OAAlB,CAA0BE,IAAI,IAAI;AAC9B,cAAMiB,mBAAmB,GAAGP,MAAM,CAACE,KAAP,CAAaC,IAAb,CAAkBC,IAAI,IAAIA,IAAI,CAACd,IAAL,KAAcA,IAAxC,EAA8CkB,EAA1E;AACAtB,QAAAA,mBAAmB,CAACI,IAAD,CAAnB,GAA4BiB,mBAA5B;AACH,OAHD;;AAKA,WAAK,IAAIjB,IAAT,IAAiBJ,mBAAjB,EAAqC;AACjC,YAAIsB,EAAE,GAAGtB,mBAAmB,CAACI,IAAD,CAA5B;AACA,cAAMmB,aAAa,GAAG;AAClBC,UAAAA,MAAM,EAAEF,EADU;AAElBG,UAAAA,QAAQ,EAAErB,IAFQ;AAGlBsB,UAAAA,YAAY,EAAEpC,aAAa,CAAC6B,QAHV;AAIlBJ,UAAAA,cAAc,EAAEA,cAJE;AAKlBY,UAAAA,YAAY,EAAEP;AALI,SAAtB;AAOAQ,QAAAA,kBAAkB,CAACL,aAAD,CAAlB;AACH;;AACDT,MAAAA,MAAM,CAACe,KAAP,GAAeC,KAAK,CAAChB,MAAM,CAACe,KAAR,CAApB,GAAqCC,KAAK,CAAC,yBAAD,CAA1C,CApBY,CAqBZ;AAEH,KA7BD;AA8BH,GA/BD;AAgCH,CA/CM;AAiDP,OAAO,MAAMF,kBAAkB,GAAIL,aAAD,IAAmB;AAEjDQ,EAAAA,OAAO,CAACC,GAAR,CAAYT,aAAZ;AAEH,CAJM","sourcesContent":["// THIS WHOLE FINDDRIVEFOLDERIDS FUNCTION SHOULD BE REFACTORED TO A FETCH FOLDER DATA FUNCTION\nexport const findDriveFolderIds = (selectionData) =>{\n\n// I WANT TO MOVE THE VIDEOS IN selectionData.selectedVideos TO selectionData.reveiewer 's DRIVE FOLDER\n    const ACCESS_TOKEN = process.env.REACT_APP_ACCESS_TOKEN\n    const DRIVE_ID = process.env.REACT_APP_GOOGLEDRIVE_PARENT_ID\n    const DRIVE_API_KEY = process.env.REACT_APP_GOOGLEDRIVE_API_KEY\n    const selectedFileNames = []\n    const selectedNamesAndIds = {}\n    \n\n    selectionData.selectedVideos.forEach(video => {\n        let name = `KS_${video.mcVodId}_HD.wmv`\n        selectedFileNames.push(name)\n    })\n\n    return (dispatch) => {\n        fetch(`https://www.googleapis.com/drive/v3/files`, \n        {\n            headers: {\n                authorization: `Bearer ${ACCESS_TOKEN}`,\n            }\n        }).then(response => response.json())\n        .then(rxData => {\n            const reviewerFolder = rxData.files.find(file => file.name === selectionData.reviewer + \"_QA\")\n            const oldParentFolder = rxData.files.find(file => file.name === \"TO_BE_ASSIGNED\")\n            // GET FILE IDS OF SELECTED VIDEOS\n            selectedFileNames.forEach(name => {\n                const selectedDriveDataId = rxData.files.find(file => file.name === name).id\n                selectedNamesAndIds[name] = selectedDriveDataId\n            })\n\n            for (let name in selectedNamesAndIds){\n                let id = selectedNamesAndIds[name]\n                const dataForUpdate = {\n                    fileId: id,\n                    fileName: name,\n                    reviewerName: selectionData.reviewer,\n                    reviewerFolder: reviewerFolder,\n                    parentFolder: oldParentFolder\n                }\n                updateDriveFolders(dataForUpdate)\n            }\n            rxData.error ? alert(rxData.error) : alert(\"Updating Folder Data...\")\n            // console.log(\"drive\", rxData)\n            \n        })\n    }\n}\n\nexport const updateDriveFolders = (dataForUpdate) => {\n\n    console.log(dataForUpdate)\n    \n}\n\n\n\n\n"]},"metadata":{},"sourceType":"module"}