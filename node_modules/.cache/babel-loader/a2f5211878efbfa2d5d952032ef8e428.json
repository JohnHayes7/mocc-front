{"ast":null,"code":"import { updateDriveFolders, checkNextPageForVideo } from './moveToSelectedDriveFolder';\nexport const moveFoundFilesToReviewerFolder = selectionData => {\n  const ACCESS_TOKEN = process.env.REACT_APP_ACCESS_TOKEN;\n  let vodId = selectionData.mvVodId;\n  let fileName = `KS_${vodId}_HD.wmv`;\n  let folderName = `${selectionData.reviewer}_QA`;\n  const reviewerIds = {\n    \"Craig_QA\": \"1GRkauySLVv3YDsIvv8jM4fLApCI6YKqW\",\n    \"Junior_QA\": \"1TpVBnxkCQwFIPjq-yQreCGm5oc-fR5o2\",\n    \"Mike_G_QA\": \"1BD6vFptjA0N_oAyvQmShSqVMupWXoZxm\",\n    \"Mike_Berlin_QA\": \"1ZLT3gJAxqq7kMGQO-lTEKOvbmfz8UIfe\",\n    \"Ron_QA\": \"1gY0s29gHOt9qUOBmuX6alUGHVaFQDMqb\",\n    \"Shane_QA\": \"14Ot7H6HKw6pks07oLitQkjb25pJFzc0r\",\n    \"Tim_QA\": \"16XBqeXOWpBsw8AV3gbgMMunWKKjMafNH\",\n    \"Josh_QA\": \"10C8Fod-PfX7wBr1R1PjRoncSIZTV8syq\",\n    \"Luke_Simi_QA\": \"1nzSF18X0eBUAfE-_GC2SzkyliGsPSxEK\"\n  };\n  fetch(`https://www.googleapis.com/drive/v3/files?corpora=allDrives&includeTeamDriveItems=true&pageSize=1000&supportsAllDrives=true`, {\n    headers: {\n      authorization: `Bearer ${ACCESS_TOKEN}`\n    }\n  }).then(response => response.json()).then(rxData => {\n    debugger;\n    const reviewerFolder = reviewerIds[folderName] || null;\n    const oldParentFolder = \"1shZeeuZyfUucN8egUBkemkmbexmkjWji\";\n    debugger;\n\n    if (rxData.error) {\n      alert(rxData.error.message);\n    } else if (rxData.files.find(file => file.name === fileName)) {\n      const fileId = rxData.files.find(file => file.name === fileName).id;\n      const dataForUpdate = {\n        fileId: fileId,\n        fileName: fileName,\n        reviewerName: selectionData.reviewer,\n        reviewerFolderId: reviewerFolder,\n        parentFolderId: oldParentFolder\n      };\n      debugger;\n      updateDriveFolders(dataForUpdate);\n    } else {\n      checkNextPageForVideo(rxData.nextPageToken, selectionData, reviewerFolder, oldParentFolder);\n    }\n  });\n};","map":{"version":3,"sources":["/Users/John/Dev/MC/media_ops_control_center/the-mocc-front/src/actions/moveFoundFilesToReviewerFolder.js"],"names":["updateDriveFolders","checkNextPageForVideo","moveFoundFilesToReviewerFolder","selectionData","ACCESS_TOKEN","process","env","REACT_APP_ACCESS_TOKEN","vodId","mvVodId","fileName","folderName","reviewer","reviewerIds","fetch","headers","authorization","then","response","json","rxData","reviewerFolder","oldParentFolder","error","alert","message","files","find","file","name","fileId","id","dataForUpdate","reviewerName","reviewerFolderId","parentFolderId","nextPageToken"],"mappings":"AAAA,SAASA,kBAAT,EAA6BC,qBAA7B,QAA2D,6BAA3D;AAEA,OAAO,MAAMC,8BAA8B,GAAKC,aAAF,IAAqB;AAC/D,QAAMC,YAAY,GAAGC,OAAO,CAACC,GAAR,CAAYC,sBAAjC;AACA,MAAIC,KAAK,GAAGL,aAAa,CAACM,OAA1B;AACA,MAAIC,QAAQ,GAAK,MAAKF,KAAM,SAA5B;AACA,MAAIG,UAAU,GAAI,GAAER,aAAa,CAACS,QAAS,KAA3C;AAEA,QAAMC,WAAW,GAAG;AAChB,gBAAW,mCADK;AAEhB,iBAAa,mCAFG;AAGhB,iBAAa,mCAHG;AAIhB,sBAAiB,mCAJD;AAKhB,cAAS,mCALO;AAMhB,gBAAW,mCANK;AAOhB,cAAS,mCAPO;AAQhB,eAAW,mCARK;AAShB,oBAAiB;AATD,GAApB;AAYAC,EAAAA,KAAK,CAAE,6HAAF,EACD;AACIC,IAAAA,OAAO,EAAE;AACLC,MAAAA,aAAa,EAAG,UAASZ,YAAa;AADjC;AADb,GADC,CAAL,CAKOa,IALP,CAKYC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EALxB,EAMKF,IANL,CAMUG,MAAM,IAAI;AACZ;AACA,UAAMC,cAAc,GAAGR,WAAW,CAACF,UAAD,CAAX,IAA2B,IAAlD;AACA,UAAMW,eAAe,GAAG,mCAAxB;AACA;;AACA,QAAGF,MAAM,CAACG,KAAV,EAAgB;AACZC,MAAAA,KAAK,CAACJ,MAAM,CAACG,KAAP,CAAaE,OAAd,CAAL;AACH,KAFD,MAEM,IAAGL,MAAM,CAACM,KAAP,CAAaC,IAAb,CAAkBC,IAAI,IAAIA,IAAI,CAACC,IAAL,KAAcnB,QAAxC,CAAH,EAAqD;AACvD,YAAMoB,MAAM,GAAGV,MAAM,CAACM,KAAP,CAAaC,IAAb,CAAkBC,IAAI,IAAIA,IAAI,CAACC,IAAL,KAAcnB,QAAxC,EAAkDqB,EAAjE;AACI,YAAMC,aAAa,GAAG;AAClBF,QAAAA,MAAM,EAAEA,MADU;AAElBpB,QAAAA,QAAQ,EAAEA,QAFQ;AAGlBuB,QAAAA,YAAY,EAAE9B,aAAa,CAACS,QAHV;AAIlBsB,QAAAA,gBAAgB,EAAEb,cAJA;AAKlBc,QAAAA,cAAc,EAAEb;AALE,OAAtB;AAOA;AACAtB,MAAAA,kBAAkB,CAACgC,aAAD,CAAlB;AAEP,KAZK,MAYD;AACD/B,MAAAA,qBAAqB,CAACmB,MAAM,CAACgB,aAAR,EAAuBjC,aAAvB,EAAsCkB,cAAtC,EAAsDC,eAAtD,CAArB;AACH;AACJ,GA5BL;AA8BH,CAhDM","sourcesContent":["import { updateDriveFolders, checkNextPageForVideo  } from './moveToSelectedDriveFolder'\n\nexport const moveFoundFilesToReviewerFolder = ( selectionData ) => {\n    const ACCESS_TOKEN = process.env.REACT_APP_ACCESS_TOKEN\n    let vodId = selectionData.mvVodId \n    let fileName =  `KS_${vodId}_HD.wmv` \n    let folderName = `${selectionData.reviewer}_QA` \n\n    const reviewerIds = {\n        \"Craig_QA\":\"1GRkauySLVv3YDsIvv8jM4fLApCI6YKqW\",\n        \"Junior_QA\": \"1TpVBnxkCQwFIPjq-yQreCGm5oc-fR5o2\",\n        \"Mike_G_QA\": \"1BD6vFptjA0N_oAyvQmShSqVMupWXoZxm\",\n        \"Mike_Berlin_QA\":\"1ZLT3gJAxqq7kMGQO-lTEKOvbmfz8UIfe\",\n        \"Ron_QA\":\"1gY0s29gHOt9qUOBmuX6alUGHVaFQDMqb\",\n        \"Shane_QA\":\"14Ot7H6HKw6pks07oLitQkjb25pJFzc0r\",\n        \"Tim_QA\":\"16XBqeXOWpBsw8AV3gbgMMunWKKjMafNH\",\n        \"Josh_QA\": \"10C8Fod-PfX7wBr1R1PjRoncSIZTV8syq\",\n        \"Luke_Simi_QA\" : \"1nzSF18X0eBUAfE-_GC2SzkyliGsPSxEK\"\n    }\n\n    fetch(`https://www.googleapis.com/drive/v3/files?corpora=allDrives&includeTeamDriveItems=true&pageSize=1000&supportsAllDrives=true`, \n        { \n            headers: {\n                authorization: `Bearer ${ACCESS_TOKEN}`\n            }\n        }).then(response => response.json())\n        .then(rxData => {\n            debugger\n            const reviewerFolder = reviewerIds[folderName] || null\n            const oldParentFolder = \"1shZeeuZyfUucN8egUBkemkmbexmkjWji\"\n            debugger\n            if(rxData.error){\n                alert(rxData.error.message)   \n            }else if(rxData.files.find(file => file.name === fileName)){\n                const fileId = rxData.files.find(file => file.name === fileName).id  \n                    const dataForUpdate = {\n                        fileId: fileId,\n                        fileName: fileName,\n                        reviewerName: selectionData.reviewer,\n                        reviewerFolderId: reviewerFolder,\n                        parentFolderId: oldParentFolder\n                    }\n                    debugger\n                    updateDriveFolders(dataForUpdate) \n                \n            }else{\n                checkNextPageForVideo(rxData.nextPageToken, selectionData, reviewerFolder, oldParentFolder)\n            } \n        })\n\n}"]},"metadata":{},"sourceType":"module"}